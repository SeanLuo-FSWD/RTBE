(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{112:function(e,t,n){e.exports={nav_container:"Navbar_nav_container__a7jN4"}},129:function(e,t,n){},130:function(e,t,n){},157:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(26),r=n.n(o),a=(n(129),n(130),n(19)),i=n(29),l=n(13),s=n(6),u=Object(c.createContext)({});function d(e){var t=Object(c.useState)(null),n=Object(a.a)(t,2),o=n[0],r=n[1];return Object(s.jsx)(u.Provider,{value:{currentUser:o,setCurrentUser:r},children:e.children})}var j=n(61),b="http://rmtlab-env.eba-vprm97ju.us-east-2.elasticbeanstalk.com/",h="".concat(b,"api/");var p=function(){return Object(c.useContext)(u).currentUser?Object(s.jsx)(l.a,{to:"/"}):Object(s.jsxs)("div",{children:[Object(s.jsx)(j.a,{children:Object(s.jsx)("title",{children:"Login Page"})}),Object(s.jsx)("h2",{"data-cy":"LoginPg_title",children:"Login page"}),Object(s.jsx)("button",{onClick:function(){window.open("".concat(b,"api/auth/google"),"_self")},children:"Google Login"})]})},O=n(111),f=function(e){var t=e.children,n=Object(l.h)();console.log("ErrorHandler called"),console.log(n.state);var c,o,r=Object(O.get)(n.state,"errorMsg");switch(r&&(console.log("ErrorHandler found error :"),console.log(r)),r){case"Forbidden resource":o="/login";break;default:c=window.location.pathname,o="/error"}return r?Object(s.jsx)(l.a,{push:!0,to:{pathname:o,state:{err_msg:r,goback_path:c}}}):t},g=function(e){var t,n,c,o,r=(null===e||void 0===e||null===(t=e.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.goback_path)?e.location.state.goback_path:null,a=(null===e||void 0===e||null===(c=e.location)||void 0===c||null===(o=c.state)||void 0===o?void 0:o.err_msg)?e.location.state.err_msg:"Could server be down?";return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"error"}),Array.isArray(a)?a.map((function(e){return Object(s.jsx)("h2",{children:e})})):Object(s.jsx)("h2",{children:a}),r&&Object(s.jsx)(i.b,{to:r,children:"Back"})]})},v=n(63),x=n.n(v),m=function(){var e=Object(l.g)();return[function(t){var n,c,o,r;console.log("doErrorCatcher : err"),console.log(t);var a=(null===(n=t.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)?t.response.data.message:"Unhandled server side message?",i=(null===(o=t.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.statusCode)?t.response.data.statusCode:503;"/error"!==window.location.pathname&&(e?e.replace(e.location.pathname,{errorStatusCode:i,errorMsg:a}):window.location.replace("/error"))}]},y=function(){var e=m(),t=Object(a.a)(e,1)[0];return[function(e,n){x.a.get("".concat(h).concat(e),{withCredentials:!0}).then((function(t){console.log(e+" doGet : response.data"),console.log(t.data),n&&n(t.data)})).catch((function(e){t(e)}))}]};var w=function(e){var t=e.isAuth,n=e.Component;return Object(s.jsx)(l.b,{render:function(e){return t?Object(s.jsx)(n,{}):Object(s.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}})},_=n(22),C=n(112),D=n.n(C);var S=function(){var e=Object(c.useContext)(u),t=e.currentUser,n=e.setCurrentUser,o=y(),r=Object(a.a)(o,1)[0],d=Object(l.g)();return Object(s.jsxs)("div",{className:"".concat(D.a.nav_container),children:[Object(s.jsxs)("h3",{children:["Welcome, ",t.username]}),Object(s.jsx)(i.b,{to:"/",children:Object(s.jsx)("p",{children:"Home"})}),Object(s.jsx)(i.b,{to:"/calendar",children:Object(s.jsx)("p",{children:"Calendar"})}),Object(s.jsx)("button",{onClick:function(){r("auth/logout",(function(e){n(null),d.push("/login")}))},children:"logout"})]})},k=function(){var e=m(),t=Object(a.a)(e,1)[0];return[function(e,n,c){x()({method:"POST",url:"".concat(h).concat(e),data:n,headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then((function(e){c(e.data)})).catch((function(e){t(e)}))}]},T=n(124),E=n(258),P=(n(157),n(84)),M=n(73),A=n.n(M),L=0,U=((new Date).toISOString().replace(/T.*$/,""),[{id:G(),title:"All-day event",type:"once",description:"first event description here",duration:["Sep 19 2021 00:00:00 GMT-0700 (Pacific Daylight Time)","Sep 21 2021 24:00:00 GMT-0700 (Pacific Daylight Time)"]},{id:G(),title:"Timed event",type:"once",description:"event description here",duration:["Sep 21 2021 00:00:00 GMT-0700 (Pacific Daylight Time)","Sep 21 2021 24:00:00 GMT-0700 (Pacific Daylight Time)"]},{id:G(),title:"Monthly reoccuring",type:"monthly",description:"Monthly event description here",days:[20,30]},{id:G(),title:"Weely reoccuring",type:"weekly",description:"Weely event description here",days:[0,5]}]);function G(){return String(L++)}n(167);var q={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};A.a.setAppElement("#root");var F={id:null,title:null,description:null,duration:[]},I={title:null,description:null,type:"once",duration:[]},R=!1;var N=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(!1),i=Object(a.a)(r,2),l=i[0],u=i[1],d=Object(c.useState)(I),j=Object(a.a)(d,2),b=j[0],h=j[1],p=Object(c.useState)(!1),O=Object(a.a)(p,2),f=O[0],g=O[1];Object(c.useEffect)((function(){if(l){var e=[];b.duration.forEach((function(t){e.push(new Date(t+" 00:00:00 GMT-0700 (Pacific Daylight Time)"))})),v(e)}}),[b.duration,f]),Object(c.useEffect)((function(){var e=document.querySelector(".ant-picker-content tbody");null===e||void 0===e||e.addEventListener("click",(function(){R=!0}))}),[]),Object(c.useEffect)((function(){R=!1}));var v=function(e){var t=document.querySelectorAll(".react-calendar__tile--active");t&&t.forEach((function(e){e.classList.remove("react-calendar__tile--active")})),e[0]&&x(e[0],"pick_start"),e[1]&&x(e[1],"pick_end")},x=function(e,t){console.log("target_class"),console.log(t);var n,c="".concat(e.toLocaleString("default",{month:"long"})," ").concat(e.getDate(),", ").concat(e.getFullYear()),o=document.querySelector(".".concat(t,' [aria-label="').concat(c,'"]'));o&&(null===(n=o.parentElement)||void 0===n||n.classList.add("react-calendar__tile--active"))},m=function(e,t){console.log("88888888888888888888"),console.log(b.duration);var n=Object(T.a)(b.duration),c=e.toISOString().replace(/T.*$/,"");t?n[0]=c:n[1]=c,console.log("999999999999999999999"),console.log(b.duration),new Date(n[0])>new Date(n[1])?(window.alert("Start date is later than end date!"),console.log("formvalue.duration__"),console.log(b.duration),g(!f)):(console.log("?????????????????"),console.log("new_duration"),console.log(n),h(Object(_.a)(Object(_.a)({},b),{},{duration:n})))};function y(){console.log("closemodallll calleeddd"),n&&o(!1),l&&u(!1)}var w=function(e){var t=e._d;return U.map((function(n){var c,r,a=Object(s.jsx)("button",{onClick:function(e){return function(e,t){e.stopPropagation();for(var n=0;n<U.length;n++)t===U[n].id&&(F=U[n],o(!0))}(e,n.id)},children:n.title});if("once"===n.type){if(c=new Date(n.duration[0]),r=new Date(n.duration[1]),t>=c&&t<=r)return a}else for(var i="monthly"===n.type?new Date(e).getDate():new Date(e).getDay(),l=0;l<n.days.length;l++)if(i===n.days[l])return a}))};return Object(s.jsxs)("div",{id:"calendarPg",children:[Object(s.jsx)(E.a,{onSelect:function(e){return function(e){if(console.log("date_click date_click date_click"),console.log(R),R){var t=new Date(e);if(t>new Date){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0).toISOString().replace(/T.*$/,"");console.log("nopenopenopenopenopenope"),h(Object(_.a)(Object(_.a)({},b),{},{duration:[n]})),u(!0)}}}(e)},dateCellRender:function(e){return w(e)}}),Object(s.jsxs)(A.a,{isOpen:n,onRequestClose:y,style:q,contentLabel:"Example Modal",children:[Object(s.jsx)("button",{onClick:y,children:"close"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{}),Object(s.jsxs)("p",{children:["Title: ",F.title]}),Object(s.jsxs)("p",{children:["Description: ",F.description]}),F.duration&&Object(s.jsxs)("div",{children:[" ",Object(s.jsxs)("p",{children:["start: ",F.duration[0]]}),Object(s.jsxs)("p",{children:["end: ",F.duration[1]]})]})]})]}),Object(s.jsxs)(A.a,{isOpen:l,onRequestClose:y,style:q,onAfterOpen:function(){console.log("000000000000000000000"),console.log("000000000000000000000"),console.log(b.duration[0]);var e,t=new Date(b.duration[0]+" 00:00:00 GMT-0700 (Pacific Daylight Time)"),n="".concat(t.toLocaleString("default",{month:"long"})," ").concat(t.getDate(),", ").concat(t.getFullYear()),c=document.querySelector('[aria-label="'.concat(n,'"]'));(console.log("444444444444444444"),c)&&(console.log("55555555555555555"),null===(e=c.parentElement)||void 0===e||e.click());document.querySelectorAll(".react-calendar__tile").forEach((function(e){var t=e.querySelector("abbr");if(t){var n=t.getAttribute("aria-label");if(n)new Date(n)<=new Date&&e.addEventListener("click",(function(e){console.log(e),e.stopPropagation()}))}}))},children:[Object(s.jsx)("button",{onClick:y,children:"close"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Object(_.a)(Object(_.a)({},b),{},{duration:[b.duration[0]+" 00:00:00 GMT-0700 (Pacific Daylight Time)",b.duration[1]+" 24:00:00 GMT-0700 (Pacific Daylight Time)"]});U.push(t),h(I),y()},children:[Object(s.jsx)("label",{children:"Title"}),Object(s.jsx)("input",{type:"text",name:"title",value:b.title,onChange:function(e){return h(Object(_.a)(Object(_.a)({},b),{},{title:e.target.value}))}}),Object(s.jsx)("label",{children:"Description"}),Object(s.jsx)("input",{type:"text",name:"description",value:b.description,onChange:function(e){return h(Object(_.a)(Object(_.a)({},b),{},{description:e.target.value}))}}),Object(s.jsxs)("select",{id:"select",onChange:function(e){return h(Object(_.a)(Object(_.a)({},b),{},{type:e.target.value}))},children:[Object(s.jsx)("option",{value:"once",children:"once"}),Object(s.jsx)("option",{value:"monthly",children:"monthly"}),Object(s.jsx)("option",{value:"weekly",children:"weekly"})]}),function(){switch(b.type){case"once":return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:"Pick start and end date"}),Object(s.jsxs)("div",{style:{display:"flex"},children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["Start date:"," ",b.duration[0]?Object(s.jsxs)("span",{children:[" ",b.duration[0]]}):Object(s.jsx)("span",{children:" ?"})]}),Object(s.jsx)("div",{className:"pick_start",children:Object(s.jsx)(P.a,{onChange:function(e){return m(e,!0)}})})]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["End date:"," ",b.duration[1]?Object(s.jsxs)("span",{children:[" ",b.duration[1]]}):Object(s.jsx)("span",{children:" ?"})]}),Object(s.jsx)("div",{className:"pick_end",children:Object(s.jsx)(P.a,{onChange:function(e){return m(e,!1)}})})]})]})]});case"monthly":return Object(s.jsx)("div",{children:"monthly"});case"weekly":return Object(s.jsx)("div",{children:"weekly"});default:return null}}(),Object(s.jsx)("input",{type:"submit"})]})]})]})};var H=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],o=t[1],r=Object(c.useContext)(u),i=r.currentUser,l=r.setCurrentUser,d=k(),h=Object(a.a)(d,1)[0],p="",O=[],f=[];return Object(s.jsxs)("div",{children:[Object(s.jsx)(S,{}),Object(s.jsx)(j.a,{children:Object(s.jsx)("title",{children:"Home Page"})}),Object(s.jsx)("h2",{children:"Home Page"}),Object(s.jsx)(N,{}),Object(s.jsx)("img",{src:"".concat(b).concat(i.profileImg),width:"300",height:"300"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;if(n&&n.file_arr.length>0)for(var c=0;c<n.file_arr.length;c++)t.append("filesToUpload[]",n.file_arr[c]);f=[],O=[],h("other/image",t,(function(e){l(Object(_.a)(Object(_.a)({},i),{},{profileImg:e.profileImg}))}))},children:[Object(s.jsx)("input",{type:"file",id:"myFile",name:"filename",accept:"image",multiple:!0,onChange:function(e){return function(e){(O=Array.from(e.target.files)).map((function(e){var t=[];t.push(e);var n=new Blob(t);p=window.URL.createObjectURL(n),f.push(p)})),o({src_arr:f,file_arr:O})}(e)}}),Object(s.jsx)("input",{type:"submit"})]})]})};var B=function(){var e=Object(c.useContext)(u),t=e.currentUser,n=e.setCurrentUser,o=y(),r=Object(a.a)(o,1)[0];return Object(c.useEffect)((function(){r("auth/authenticate",(function(e){e?(e.username,n(e)):console.log("Router: user not authenticated")}))}),[]),Object(s.jsx)(i.a,{children:Object(s.jsx)(f,{children:Object(s.jsxs)(l.d,{children:[Object(s.jsx)(l.b,{path:"/error",component:g}),Object(s.jsx)(l.b,{path:"/login",component:p}),Object(s.jsx)(w,{path:"/calendar",Component:N,isAuth:t}),Object(s.jsx)(w,{path:"/",Component:H,isAuth:t})]})})})};var W=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(B,{})})};r.a.render(Object(s.jsx)(d,{children:Object(s.jsx)(W,{})}),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.0ef1c6f9.chunk.js.map